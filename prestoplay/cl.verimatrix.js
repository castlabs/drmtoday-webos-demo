(function(){var g={}; var _ = _ || {}
var f=function(window){var Gv="VerimatrixVCAS",Hv="clpp.verimatrix.Vcas",Iv="clpp.verimatrix.VcasComponent",Ov=function(a){_.$l.call(this,Gv);var b={};b[Jv]=Jv;b[Kv]=Kv;var c=a.authenticator,d=void 0===a.licenseRequestVuidLocation?Lv:a.licenseRequestVuidLocation;b=void 0===a.httpHeaderNames?b:a.httpHeaderNames;var e=a.widevineLicenseUrl,f=a.playReadyLicenseUrl,g=a.fairPlayLicenseUrl,h=a.fairPlayCertificateUrl,l=a.fairPlaySiteId,m=void 0===a.fairPlayAssetIdStrategy?Mv:a.fairPlayAssetIdStrategy;this.A=a.deviceId;this.a=c;
this.C=d;this.B=b;this.w=Nv(this,e);this.o=Nv(this,f);this.l=Nv(this,g);this.j=h;this.H=l;this.G=m;this.g=new _.K(Hv);_.R.empty(this.w)?this.g.warn(_.oc):this.Ta(_.Rd,{licenseUrl:this.w,videoRobustness:[_.Vb,void 0],audioRobustness:[_.Ub,void 0],persistentStateRequired:!1,distinctiveIdentifierRequired:!1,serverCertificate:null,modifiers:{licenseRequest:this.h.bind(this)}});_.R.empty(this.o)?this.g.warn(_.Gb):this.Ta(_.Pd,{licenseUrl:this.o,videoRobustness:["3000"],audioRobustness:["2000"],modifiers:{licenseRequest:this.h.bind(this)}});
_.R.empty(this.l)?this.g.warn(_.cb):_.R.empty(this.j)?this.g.warn(_.bb):this.Ta(_.Md,{licenseUrl:this.l,certificateUrl:this.j,modifiers:{licenseRequest:this.K.bind(this),licenseResponse:this.M.bind(this),extractContentId:this.I.bind(this)}})},Nv=function(a,b){if(a.C===Lv){var c=Object.assign({},{deviceId:_.ej(_.R.ed(a.A))},a.a&&{authenticator:_.ej(_.R.ed(a.a))});return b+_.Zj(c)}return b},Pv=function(){this.g=new _.K(Iv)};_.w(Ov,_.$l);
Ov.prototype.h=function(a,b){if(this.C===Qv){var c=this.B[Kv],d={};d[this.B[Jv]]=this.A;this.a&&(d[c]=this.a);Object.keys(d).forEach(function(e){b.headers[e]=d[e]})}};Ov.prototype.I=function(a,b){var c=_.vm(b);switch(this.G){case Rv:c=_.Zj({r:c,nn:this.H},!0)}return c};Ov.prototype.K=function(a,b){this.h(a,b);_.ym(b)};Ov.prototype.M=function(a,b){_.zm(b)};_.H(Hv,Ov);Ov.prototype.constructor=Ov.prototype.constructor;Ov.NAME=Gv;var Lv="query-string",Qv="http-header";
Ov.LicenseRequestVuidLocation={QUERY_STRING:Lv,HTTP_HEADER:Qv};var Jv="DeviceId",Kv="Authenticator";Ov.LicenseRequestHttpHeader={DEVICE_ID_HEADER:Jv,AUTHENTICATOR_HEADER:Kv};var Mv="keyid",Rv="contentid-siteid";Ov.FairPlayAssetIdStrategy={KEYID:Mv,CONTENTID_SITEID:Rv};_.w(Pv,_.Ir);Pv.prototype.a=function(){delete _.Ul.VerimatrixVCAS};Pv.prototype.h=function(a){a=a.getConfiguration();if(a.drm&&a.drm.env===Gv){a=a.drm.customData;if(!a)throw new _.P(_.Q,7,7100,_.Sd);a=new Ov(a);this.g.info("Registering the Verimatrix VCAS Ultra environment");_.Vl(a)}};Pv.prototype.id=function(){return"verimatrix-vcas"};_.H(Iv,Pv);};
if(typeof(module)!="undefined"&&module.exports){var x=require("./cl.core.js");_ = x._;(f.call(g,this));module.exports=g;}
else if (typeof(define)!="undefined"&&define.amd) {define(["./cl.core"], function(c){_=c._;(f.call(g,this));return g;});}
else{_=this.clpp._;(f.call(g,this));}
})();