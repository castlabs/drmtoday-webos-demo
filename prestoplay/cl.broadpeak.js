(function(){var g={}; var _ = _ || {}
var f=function(window){var PR=function(a,b){this.m=a;this.f=b;this.a=new _.Eh;this.h=!1},QR=function(a){function b(c){var d=GenericPlayerApi.call(this)||this;d.m=c;d.a=_.Fj();return d}_.w(b,GenericPlayerApi);b.prototype.getPlayerName=function(){return _.wa};b.prototype.getVersion=function(){return _.ja};b.prototype.getOSName=function(){return this.a.os};b.prototype.getDeviceVersion=function(){return this.a.osVersion.name};b.prototype.getDeviceType=function(){return"browser"};b.prototype.getTotalDuration=function(){return this.m.isLive()?
0:1E3*this.m.getDuration()};b.prototype.getCurrentPosition=function(){return 1E3*this.m.getPosition()};b.prototype.getCurrentBitrate=function(){var c=this.m.getStats();return(c?c.streamBandwidth:0)/1E3};return new b(a)},RR=function(){this.l=this.f=this.a=this.h=this.m=null;this.o=new _.Eh;this.j=!1},SR=function(a,b){var c=b.analyticsAddress||null,d=b.nanoCDNHost||null,e=b.broadpeakDomainNames||"",f=b.uuid||null;a.h||(a.h=SmartLib.getInstance(),a.h.init(c,d,e),typeof f===_.Wf&&a.h.setUUID(f))},TR=
function(a,b){var c=b.customParameters||{};a.a=a.h.createStreamingSession();a.a.setOption(StreamingSessionOptions.SESSION_PRECACHE,!0);for(var d in c)a.a.setCustomParameter(d,c[d]);a.o.on(a.m,_.ne,a.U.bind(a));a.l=QR(a.m);a.a.attachPlayer(a.l)},UR=function(a,b){_.Hh(a.o);a.f&&(a.f.release(),a.f=null);a.a&&(a.a.stopStreamingSession(b),a.a=null)},VR=function(){return!window.SmartLib||!window.GenericPlayerApi},WR=function(){};_.r=PR.prototype;
_.r.init=function(){var a=this.m,b=this.a;b.on(a,_.Tf,this.vi.bind(this));b.on(a,_.gd,this.ri.bind(this));b.on(a,"seek",this.si.bind(this))};_.r.ri=function(a){a=a.detail;typeof a.bandwidth===_.k&&this.f.notifyLayerSwitch(a.bandwidth/1E3)};_.r.vi=function(a){var b=this.m,c=this.f;a=a.detail;var d=a.currentState;a.previousState===_.Mo&&c.notifyStallEnd(!b.isPaused());switch(d){case _.Mo:c.notifyStallStart();break;case _.Vo:this.h?c.notifyResume():(c.notifyFirstImage(),this.h=!0);break;case _.Uo:c.notifyPause()}};
_.r.si=function(){var a=1E3*this.m.getPosition();this.f.notifySeek(a)};_.r.release=function(){this.a&&(_.Hh(this.a),this.a=null)};_.w(RR,_.rt);_.r=RR.prototype;_.r.onPlayerCreated=function(a){this.m=a};_.r.onContentWillLoad=function(a,b){var c=this,d=a.getConfiguration().broadpeak;if(d){if(VR())return a.onError(new _.P(1,9,11E3));this.j=!0;SR(this,d);TR(this,d);return this.a.getURL(b.url).then(function(e){if(e.isError()){var f=e.getDetailedErrorCode();e=e.getDetailedErrorMessage();c.m.onError(new _.P(1,9,11001,{bpkErrorCode:f,message:e}));UR(c,void 0)}else b.url=e.getURL(),c.f=new PR(c.m,c.l),c.f.init()})}};
_.r.onContentLoaded=function(){!1!==this.j&&this.a.precacheEnded()};_.r.U=function(a){a=a.detail;if(7003===a.code)UR(this,SmartLib.BPFormatNotSupportedError);else if(a.severity===_.Q)switch(a.category){case 3:UR(this,SmartLib.BPDecodingError);break;case 1:UR(this,SmartLib.BPNetworkingError);break;case 6:UR(this,SmartLib.BPAccessRightError);break;default:UR(this,SmartLib.BPUnspecifiedError)}};_.r.onPlayerWillRelease=function(){VR()||UR(this,SmartLib.BPSessionEndsNormally);this.j=!1};_.r.id=function(){return"broadpeak"};
_.H("clpp.broadpeak.BroadpeakPlugin",RR);RR.isSdkMissing=VR;RR.Id="broadpeak";WR.prototype.create=function(){return new RR};_.nq(new WR);};
if(typeof(module)!="undefined"&&module.exports){var x=require("./cl.core.js");_ = x._;(f.call(g,this));module.exports=g;}
else if (typeof(define)!="undefined"&&define.amd) {define(["./cl.core"], function(c){_=c._;(f.call(g,this));return g;});}
else{_=this.clpp._;(f.call(g,this));}
})();